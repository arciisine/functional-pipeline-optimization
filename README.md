Things to do:
  * body
    * Find expression ranges for arr.filter().map().filter().reduce()....
    * Collect available globals per filter
    * Assign globals on inbound
    * Restore globals on outbound
    * Do an array.isarray check at runtime to determine if we should run the code  